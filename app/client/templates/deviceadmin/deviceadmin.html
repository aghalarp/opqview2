<template name="deviceadmin">
  <div class="row">
    <div class="col-lg-12">
      <!-- Linked OPQBoxes Panel -->
      <div class="row">
        <div class="col-lg-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">
                <span class="glyphicon glyphicon-hdd" style="margin-right: 5px;" aria-hidden="true"></span>Linked OPQBoxes
                <button style="margin-top:-7px" type="button" class="btn btn-default btn-sm pull-right" data-toggle="modal" data-target="#linkedOPQBoxesModal">
                  <i class="fa fa-question-circle fa-lg"></i>
                </button>
              </h3>
            </div>
            <div class="table-responsive">
              {{#if Template.subscriptionsReady}}
                <table class="table table-striped">
                  <thead>
                    <tr>
                      <th>Description</th>
                      <th>Device Id</th>
                      <th>Key</th>
                      <th>Sharing Data</th>
                      <th>Frequency Events</th>
                      <th>Voltage Events</th>
                      <th>Last Heartbeat</th>
                      <th><!--Empty for configure button--></th>
                    </tr>
                  </thead>
                  <tbody>
                      {{#each device in userDevices}}
                        <tr id={{device._id.toHexString}}>
                          <td id="description">{{device.description}}</td>
                          <td id="deviceId">{{device.deviceId}}</td>
                          <td id="accessKey">{{device.accessKey}}</td>
                          <td id="sharingData">{{device.sharingData}}</td>
                          <td id="freqCount">{{device.freqCount}}</td>
                          <td id="voltCount">{{device.voltCount}}</td>
                          <td id="lastHeartbeat" style={{lastHeartbeatColor}}>{{formatDate device.lastHeartbeat}}</td>

                          <td>
                            <a href={{pathForDeviceConfig device.deviceId}} class="btn btn-warning btn-xs pull-right">Configure OPQBox</a>
                          </td>
                        </tr>
                      {{/each}}
                  </tbody>
                </table>
              {{else}}
                {{> loading}}
              {{/if}}
            </div>
          </div>
        </div>
      </div>


      <!-- Public OPQBoxes Panel -->
      <div class="row">
        <div class="col-lg-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">
                <span class="glyphicon glyphicon-hdd" style="margin-right: 5px;" aria-hidden="true"></span>Public OPQBoxes
                <button style="margin-top:-7px" type="button" class="btn btn-default btn-sm pull-right" data-toggle="modal" data-target="#publicOPQBoxesModal">
                  <i class="fa fa-question-circle fa-lg"></i>
                </button>
              </h3>
            </div>
            <div class="table-responsive">
            <!--{{#if Template.subscriptionsReady}}-->
              <table class="table table-striped">
                <thead>
                <tr>
                  <th>Description</th>
                  <th>Device Id</th>
                  <th>Key</th>
                  <th>Sharing Data</th>
                  <th>Frequency Events</th>
                  <th>Voltage Events</th>
                  <th>Last Heartbeat</th>
                  <th><!--Empty for configure button--></th>
                </tr>
                </thead>
                <tbody>
                {{#each device in publicDevices}}
                  <tr id={{device._id.toHexString}}>
                    <td id="description">{{device.description}}</td>
                    <td id="deviceId">{{device.deviceId}}</td>
                    <td id="accessKey">{{device.accessKey}}</td>
                    <td id="sharingData">{{device.sharingData}}</td>
                    <td id="freqCount">{{device.freqCount}}</td>
                    <td id="voltCount">{{device.voltCount}}</td>
                    <td id="lastHeartbeat" style={{lastHeartbeatColor}}>{{formatDate device.lastHeartbeat}}</td>

                    <td>
                      <a id={{device._id.toHexString}} class="linkDevice btn btn-warning btn-xs pull-right">Link to Account</a>
                    </td>
                  </tr>
                {{/each}}
                </tbody>
              </table>
                <!--{{else}}-->
              <!--{{> loading}}-->
                <!--{{/if}}-->
            </div>

            <div class="panel-footer">
              <form class="form-inline">
                <button type="submit" class="btn btn-primary btn-xs pull-left" style="margin-top: 7px; margin-right: 10px"><span class="glyphicon glyphicon-plus" style="margin-right: 5px;" aria-hidden="true"></span>Add OPQBox</button>
                <div class="form-group">
                  <label class="sr-only" for="deviceId">Device ID</label>
                  <input type="email" class="form-control" id="deviceId" placeholder="Device ID">
                </div>
                <div class="form-group">
                  <label class="sr-only" for="accessKey">Access Key</label>
                  <input type="password" class="form-control" id="accessKey" placeholder="Access Key">
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--&lt;!&ndash; Linked OPQBoxes Modal &ndash;&gt;-->
  <!--<div class="modal fade" id="linkedOPQBoxesModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">-->
    <!--<div class="modal-dialog">-->
      <!--<div class="modal-content">-->
        <!--<div class="modal-header">-->
          <!--<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>-->
          <!--<h4 class="modal-title" id="myModalLabel">Linked OPQBoxes</h4>-->
        <!--</div>-->
        <!--<div class="modal-body">-->
          <!--<p>This page allows for the management of OPQBoxes.</p>-->
          <!--<p>OPQBoxes already registered with your account will show up in the table</p>-->
          <!--<p>Each row displays basic facts about your registered OPQBoxes.</p>-->
          <!--<p>To update an existing box, select the "Configure OPQBox" button beside the OPQBox you would like to configure.</p>-->
          <!--<p>To add an existing OPQBox you have access to, enter the Device ID and Access Key at the bottom of the panel and click 'Add OPQBox'.</p>-->
        <!--</div>-->
        <!--<div class="modal-footer">-->
          <!--<button type="button" class="btn btn-default" data-dismiss="modal">Got it!</button>-->
        <!--</div>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->
</template>